{"remainingRequest":"D:\\WORKSPACE\\zymk\\node_modules\\thread-loader\\dist\\cjs.js!D:\\WORKSPACE\\zymk\\node_modules\\babel-loader\\lib\\index.js!D:\\WORKSPACE\\zymk\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\WORKSPACE\\zymk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WORKSPACE\\zymk\\src\\pages\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WORKSPACE\\zymk\\src\\pages\\user.vue","mtime":1578489113575},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577705674229},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1577705661979},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\babel-loader\\lib\\index.js","mtime":1577705725439},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577705674229},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\vue-loader\\lib\\index.js","mtime":1577705715119}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Cookies from 'js-cookie';\nimport Cell from \"../components/cell.vue\";\nimport Button from \"../components/button.vue\";\nexport default {\n  data: function data() {\n    return {\n      data: {},\n      list: [{\n        text: \"我的红包\",\n        url: \"/images/redpackage.png\"\n      }, {\n        text: \"我的留言\",\n        url: \"/images/msg.png\"\n      }]\n    };\n  },\n  components: {\n    Cell: Cell,\n    Button: Button\n  },\n  mounted: function mounted() {// console.log(data)\n  },\n  updated: function updated() {},\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    //条件异步\n    // 抓取token\n    var token = window.localStorage.getItem('token');\n\n    if (token) {\n      axios({\n        url: '/api/user',\n        headers: {\n          'token': token\n        }\n      }).then( // res => res.data.err == 0 ? next(_this=>_this.data=res.data.data) : next('/login')\n      function (res) {\n        res.data.err == 0 ? next(function (_this) {\n          return _this.data = res.data.data;\n        }) : next('/login'); // console.log(_this.data);\n        // console.log(this.data);1.7号写到这里\n      });\n    } else {\n      next('/login');\n    }\n  },\n  methods: {\n    logout: function logout() {\n      //...........\n      window.localStorage.removeItem('token');\n      Cookies.remove('username'); // this.$router.go(0)\t\t  \n\n      this.$router.push('/home');\n    }\n  }\n};",{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAkBA,OAAA,OAAA,MAAA,WAAA;AACA,OAAA,IAAA;AACA,OAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OAAA,EAAA;AAAA,QAAA,IAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AACA,IAAA,MAAA,EAAA;AADA,GAPA;AAUA,EAAA,OAVA,qBAUA,CACA;AACA,GAZA;AAaA,EAAA,OAbA,qBAaA,CAEA,CAfA;AAiBA,EAAA,gBAjBA,4BAiBA,EAjBA,EAiBA,IAjBA,EAiBA,IAjBA,EAiBA;AACA;AACA;AACA,QAAA,KAAA,GAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;;AACA,QAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA;AACA,QAAA,GAAA,EAAA,WADA;AAEA,QAAA,OAAA,EAAA;AACA,mBAAA;AADA;AAFA,OAAA,CAAA,CAKA,IALA,EAMA;AACA,gBAAA,GAAA,EAAA;AACA,QAAA,GAAA,CAAA,IAAA,CAAA,GAAA,IAAA,CAAA,GAAA,IAAA,CAAA,UAAA,KAAA;AAAA,iBAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AAAA,SAAA,CAAA,GAAA,IAAA,CAAA,QAAA,CAAA,CADA,CAEA;AACA;AACA,OAXA;AAaA,KAdA,MAcA;AACA,MAAA,IAAA,CAAA,QAAA,CAAA;AACA;AACA,GAtCA;AAuCA,EAAA,OAAA,EAAA;AAEA,IAAA,MAFA,oBAEA;AACA;AACA,MAAA,MAAA,CAAA,YAAA,CAAA,UAAA,CAAA,OAAA;AACA,MAAA,OAAA,CAAA,MAAA,CAAA,UAAA,EAHA,CAIA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA;AARA;AAvCA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"user\">\r\n\t\t<div class=\"bg\">\r\n\t\t\t<img :src=\"$baseUrl + data.icon\" alt=\"\" class=\"pic\" >\r\n\t\t\t<p class=\"username\"><a href=\"javascript:;\">{{data.nikename}}</a></p>\r\n\t\t\t<!-- <p class=\"userrank\"><a href=\"javascript:;\" @click=\"logout\">注销</a></p> -->\r\n\t\t</div>\r\n\t\t<Cell \r\n\t\t\tv-for=\"(item,index) of list\"\r\n\t\t\t:key = 'index'\r\n\t\t\t:text=\"item.text\"\r\n\t\t\t:url=\"item.url\"\r\n\t\t/>\r\n\t\t<Button :text=\"'退 出 登 录'\" @click.native='logout'/>\r\n\t</div>\n</template>\n\n<script>\r\n\timport Cookies from 'js-cookie';\r\n\timport Cell from '../components/cell.vue'\r\n\timport Button from '../components/button.vue'\n\texport default{\n\t\tdata(){\n\t\t\treturn {\r\n\t\t\t\tdata:{},\t\t\t\r\n\t\t\t\tlist:[{text:\"我的红包\",url:\"/images/redpackage.png\"},{text:\"我的留言\",url:\"/images/msg.png\"}]\t\r\n\t\t}\t\t \n\t},\t\n\t\tcomponents:{\r\n\t\t\tCell,Button\r\n\t\t},\n\t\tmounted(){\n\t\t\t// console.log(data)\n\t\t},\n\t\tupdated() {\n\t\t\t\n\t\t},\r\n\t\t\r\n\t\tbeforeRouteEnter(to, from, next) {\r\n\t\t  //条件异步\r\n\t\t  // 抓取token\r\n\t\t  let token = window.localStorage.getItem('token');\r\n\t\t  if (token) {\r\n\t\t    axios({\r\n\t\t      url: '/api/user',\r\n\t\t      headers: {\r\n\t\t        'token': token\r\n\t\t      }\r\n\t\t    }).then(\r\n\t\t      // res => res.data.err == 0 ? next(_this=>_this.data=res.data.data) : next('/login')\r\n\t\t\t  (res)=>{\r\n\t\t\t\t  res.data.err == 0 ? next(_this=>_this.data=res.data.data) : next('/login');\r\n\t\t\t\t  // console.log(_this.data);\r\n\t\t\t\t  // console.log(this.data);1.7号写到这里\r\n\t\t\t  }\r\n\t\t    )\r\n\t\t  } else {\r\n\t\t    next('/login')\r\n\t\t  }\r\n\t\t},\n\t\tmethods:{\r\n\t\t\t\t\r\n\t\t\tlogout() {\r\n\t\t\t  //...........\r\n\t\t\t  window.localStorage.removeItem('token')\r\n\t\t\t  Cookies.remove('username');\r\n\t\t\t  // this.$router.go(0)\t\t  \r\n\t\t\t  this.$router.push('/home')\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\n\t}\n</script>\n\n<style scoped>\r\n \r\n    body{background: #f1f1f1}\r\n\t.user{\r\n\t\tfont-size: .13rem;\r\n\t\ttext-align: center;\t\t\r\n\t}\r\n  .user .bg{height: 1.55rem;background:url(../assets/img/userbg.png);}\r\n   .user .bg p{color: #AFA9A9;font-size: ;margin-top:.1rem;}\r\n .pic{width: .8rem;height: .8rem;border-radius: 50%;margin-top:.3rem;}\r\n \r\n</style>\n"],"sourceRoot":"src/pages"}]}