{"remainingRequest":"D:\\WORKSPACE\\zymk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WORKSPACE\\zymk\\src\\pages\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WORKSPACE\\zymk\\src\\pages\\login.vue","mtime":1578489368703},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577705674229},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1577705661979},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\babel-loader\\lib\\index.js","mtime":1577705725439},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577705674229},{"path":"D:\\WORKSPACE\\zymk\\node_modules\\vue-loader\\lib\\index.js","mtime":1577705715119}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Input from '../components/input.vue'\nimport Button from '../components/button.vue'\nimport Cookies from 'js-cookie';\nexport default{\n\tdata(){\n\t\treturn {\n\t\t\tusername: '',\n\t\t\tpassword: '',\n\t\t\tmess:'',\t\t\t\n\t\t}\n\t},\n\tcomponents:{\n\t\tInput,Button\n\t},\n\tmounted(){\n\t\t\n\t},\n\tupdated() {\n\t\t\n\t},\n\tmethods:{\n\t\tlogin() {\n\t\t  // alert(1)\n\t\t  let params = new URLSearchParams();\n\t\t  params.append('username', this.username)\n\t\t  params.append('password', this.password)\n\t\t  this.$axios({\n\t\t    url: '/api/login',\n\t\t    method: 'post',\n\t\t    data: params\n\t\t  }).then(\n\t\t    res => {\n\t\t      if(res.data.err==0){\n\t\t        //种token,跳转user\n\t\t\t\tconsole.log( this.$router);\n\t\t\t\tCookies.set('username',this.username);\t\t\t\t\n\t\t        window.localStorage.setItem('token',res.data.token);\n\t\t\t\t// this.$root.username = this.username\n\t\t        this.$router.push('/user')\n\t\t      }else{\n\t\t        this.mess=res.data.msg\n\t\t\t\talert(this.mess)\n\t\t      }\n\t\t    }\n\t\t  )\t  \n\t\t}\n\t}\n}\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n\t<div class=\"login\">\r\n\t\t<p><router-link to=\"/reg\">新用户注册&nbsp;</router-link></p>\r\n\t\t<Input label=\"账号\" ph=\" 用户名\" v-model=\"username\"/>\r\n\t\t<Input label=\"密码\" ph=\" 密码\" v-model=\"password\"/>\r\n\t\t<a href=\"javascript:;\" class=\"tishi\">密码问题找回密码</a>\r\n\t\t<Button :text=\"'立 即 登 录'\" @click.native='login'/>\r\n\t <!-- {{mess}} -->\r\n\t</div>\n</template>\n\n<script>\r\n\timport Input from '../components/input.vue'\r\n\timport Button from '../components/button.vue'\r\n\timport Cookies from 'js-cookie';\n\texport default{\n\t\tdata(){\n\t\t\treturn {\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tmess:'',\t\t\t\r\n\t\t\t}\n\t\t},\n\t\tcomponents:{\r\n\t\t\tInput,Button\r\n\t\t},\n\t\tmounted(){\n\t\t\t\n\t\t},\n\t\tupdated() {\n\t\t\t\n\t\t},\n\t\tmethods:{\r\n\t\t\tlogin() {\r\n\t\t\t  // alert(1)\r\n\t\t\t  let params = new URLSearchParams();\r\n\t\t\t  params.append('username', this.username)\r\n\t\t\t  params.append('password', this.password)\r\n\t\t\t  this.$axios({\r\n\t\t\t    url: '/api/login',\r\n\t\t\t    method: 'post',\r\n\t\t\t    data: params\r\n\t\t\t  }).then(\r\n\t\t\t    res => {\r\n\t\t\t      if(res.data.err==0){\r\n\t\t\t        //种token,跳转user\r\n\t\t\t\t\tconsole.log( this.$router);\r\n\t\t\t\t\tCookies.set('username',this.username);\t\t\t\t\r\n\t\t\t        window.localStorage.setItem('token',res.data.token);\r\n\t\t\t\t\t// this.$root.username = this.username\r\n\t\t\t        this.$router.push('/user')\r\n\t\t\t      }else{\r\n\t\t\t        this.mess=res.data.msg\r\n\t\t\t\t\talert(this.mess)\r\n\t\t\t      }\r\n\t\t\t    }\r\n\t\t\t  )\t  \r\n\t\t\t}\r\n\t\t}\n\t}\n</script>\n\n<style scoped>\r\n\t.login{\r\n\t\theight:6rem;\r\n\t\toverflow: hidden;\r\n\t\tmargin-top: .2rem;\r\n\t\tbackground: #f1f1f1;\r\n\t}\r\n\t.login p{\r\n\t\tline-height: 0.6rem;\r\n\t\tfont-size: 0.25rem;\r\n\t\tcolor:#7D7B7B; \r\n\t\ttext-align: end;\t\t\r\n\t}\r\n\t.tishi {\r\n\t   /* width: 1.4rem; */\r\n\t   font-size: 0.25rem;\r\n\t   margin-top: 0.28rem;\r\n\t   display: block;\r\n\t\tcolor:#7D7B7B;\r\n\t }\n</style>\n"]}]}